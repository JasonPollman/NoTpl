(function(e){"use strict";var t=typeof module!=="undefined"&&e.module!==module;var r=[".","^","\\","?","{","}","[","]","*","!","|","+","/"];if(t){var n=require("fs");var i=require("crypto");var o=require("path");var a=require("cli-color")}else if(window){var c={};var n={readFileSync:function(e){if(!c[e]){var t=window.XMLHttpRequest?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP");t.open("GET",e,false);t.send();c[e]=t.responseText}return c[e]},writeFileSync:function(e,t){console.log(t)}}}function l(e,r,n){if(!t){if(!e||e=="")return undefined;var o=e.split("");var a=0;for(var c in o){if(o.hasOwnProperty(c))a+=o[c].charCodeAt(0)}return a.toString(16)}return i.createHash(r||"md5").update(e,"utf8").digest(n||"hex")}function u(e,t){var r=e.split("");var n={'"':"&quot;","&":"&amp;","<":"&lt;",">":"&gt;"};if(!t){for(var i=0;i<r.length;i++)if(n[r[i]])r[i]=n[r[i]];return r.join("")}else{for(var i in n)var e=e.replace(RegExp(n[i],"g"),i);return e}}function s(){var e=new Date;return f(e.getHours(),2)+":"+f(e.getMinutes(),2)+":"+f(e.getSeconds(),2)+":"+f(e.getMilliseconds(),2)+" > "}function f(e,t){var r="000000000000000000000000000000000000000000000000"+e;return r.substr(r.length-t)}var d=function(e){var t=this;var r=Array();var n=0;var i=Array();t.init=t.value=function(e){if(!e)e="";var n=/\n/g;var o;while(o=n.exec(e))i.push(o.index);r=e.toString().split("");r.push("EOF");t.reset();return t};t.last=function(){return t.tokens[r.length-2]};t.length=function(){return r.length-1};t.pos=t.position=function(){return n};t.peek=function(){return r[n]==="EOF"?r[n-1]:r[n]};t.goto=function(e){n=e>=r.length?r.length-1:e;return t};t.line=function(){var e=0;while(i[e]<n)e++;e--;var t=n-(i[e]||0)+(e<0?1:0);return[e+2,t]};t.source=t.toString=function(){var e=r.slice(0);e.pop();return e.join("")};t.reset=function(){n=0;return this};t.rest=function(){return r.slice(n,r.length-1).join("")};t.range=function(e,t){return r.slice(e,t).join("")};t.end=t.eof=function(){return r[n]=="EOF"?true:false};t.next=function(e){if(e!=undefined){if(e<0)throw new Error("Parameter 'value' must be greater than or equal to 0.");if(typeof e!=="number")throw new Error("Parameter 'value' must be an integer value.");if(n+e>r.length-1)e=r.length-n-1;t.goto(n+=e)}else{t.goto(++n)}return t};t.previous=function(e){if(e!=undefined){if(e<0)throw new Error("Parameter 'value' must be greater than or equal to 0.");if(typeof e!=="number")throw new Error("Parameter 'value' must be an integer value.");if(n-e<0)e=0;t.goto(n-=e)}else{t.goto(--n)}return t};t.lookahead=function(e){if(e>r.length-2)e=r.length-2;if(n<r.length-2){return r.slice(n,n+e+1).join("")}else{return r.slice(n,r.length-1).join("")}};t.lookbehind=function(e){if(e<0)e=0;if(n<r.length-2){return r.slice(n-e,n).join("")}else{return r.slice(e,n).join("")}};e!==undefined?t.init(e):null;return this};var h=function(e,i,c){var f=this;var h={APPNAME:"NoTpl",VERSION:"0.1.2",messages:{get RENDER_BEGIN(){b("notice 3","---------> Render of "+f.toString()+" started.")},get RENDER_END(){b("notice 3","---------> Render of "+f.toString()+" completed ("+v.lastRenderTime+" ms).\n")},get MSG_RENDER_SUCCESS(){b("notice",f.toString()+" has been fully rendered ("+v.lastRenderTime+" ms).")},get MSG_PARTIAL_SUCCESS(){b("notice",f.toString()+" has been partially rendered ("+v.lastRenderTime+" ms).")},get MSG_STATIC_SUCCESS(){b("notice",f.toString()+" has been returned statically ("+v.lastRenderTime+" ms).")},get MSG_DELIMITER_TOO_SHORT(){b("warn","Using a single character as a delimiter is not recommended! Please use 2 or more characters.\n*** This can potentially break your code! ***")},get MSG_DELIMITER_MISMATCH_NO_STOP_DELIMITER(){b("error","Expecting '"+(t?g.delimiterStop:u(g.delimiterStop,true))+"'. Reached the end of file without matching closing tag.")},get MSG_DELIMITER_MISMATCH_STOP_WITHOUT_START(){b("error","Unexpected '"+(t?g.delimiterStop:u(g.delimiterStop,true))+"'. Found closing tag, without matching opening tag.")},get MSG_DELIMITER_MISMATCH_START_WITHOUT_STOP(){b("error","Unexpected '"+(t?g.delimiterStart:u(g.delimiterStart,true))+"'. Found opening tag, without matching closing tag.")},MSG_DELIMITER_POTENTIAL_BREAK:function(e){b("warn","Using '"+e+"' as a delimiter is not recommended.\n*** This can potentially break your code! ***")},MSG_FUNCTION_SYNTAX_ERROR_DETECTED_FIXED:function(e){b("warning","Syntax Error detected and repaired in "+f.toString()+".\n"+e+".\n")},MSG_FUNCTION_ERROR_CAUGHT:function(e){b("error",e.name+" in "+f.toString()+". Rendering skipped, with message:\n'"+e.message+"'.")},MSG_RENDER_RECURSIVE_LOOP:function(e){b("warning",f.toString()+" and "+e.toString()+" circularly reference each other. Infinite loop detected.")}}};var g={delimiterStart:"<$",delimiterStop:"$>",useAbsolutePaths:false,code:false,reporting:2,style:"compressed",haltOnError:true,partialCacheLifetime:3e4,fullCacheLifetime:0,output:false,outputFormat:["atid","type","filename","ext"],outputExt:"html",strict:true,name:undefined};var m=function(e){for(var r in e){if(typeof e[r]=="string")e[r]=e[r].trim();switch(r){case"reporting":if(typeof e[r]!="number"){b("warn","Option 'reporting' should be an integer, not '"+e[r].toString()+"'. This option has been ignored.");e[r]=g[r]}break;case"style":if(typeof e[r]!="string"){b("warn","Option 'style' should be a string, not '"+e[r].toString()+"'. This option has been ignored.");e[r]=g[r]}break;case"partialCacheLifetime":case"fullCacheLifetime":if(typeof e[r]!="number"){b("warn","Option '"+r+"' should be an integer, not '"+e[r].toString()+"'. This option has been ignored.");e[r]=g[r]}break;case"outputFormat":if(!(e[r]instanceof Array)){b("warn","Option '"+r+"' should be an array, not '"+e[r].toString()+"'. This option has been ignored.");e[r]=g[r]}}switch(r){case"fullCacheLifetime":if(e[r]<g.fullCacheLifetime){b("warn","The full cache liftime must be >= "+g.fullCacheLifetime+"ms. This option has been ignored.");e[r]=g[r]}if(e[r]>6e5)b("notice 2","The full cache liftime is > 600000 (10 Minutes). Output will appear *static* for this duration.");break;case"delimiterStart":case"delimiterStop":var n=["break","case","class","catch","const","continue","debugger","default","delete","do","else","export","extends","finally","for","function","if","import","in","instanceof","let","new","return","super","switch","this","throw","try","typeof","var","void","while","with","yield"];if(e[r].length<2)C.MSG_DELIMITER_TOO_SHORT;if(e[r].match(/(\{{2,})|(\}{2,})|(\({2,})|(\){2,})|(;{2,})|(={2,})|(\+{2,})|(-{2,})/))C.MSG_DELIMITER_POTENTIAL_BREAK(e[r]);if(e[r].match(/<=|=>|\+=|-=|\\=|\*=|%=|""|''/))C.MSG_DELIMITER_POTENTIAL_BREAK(e[r]);if(n.indexOf(e[r])>-1)C.MSG_DELIMITER_POTENTIAL_BREAK(e[r]);if(!t)e[r]=u(e[r]);break}g[r]=e[r]}};var v={get path(){return w},get lastFullRender(){return P},get lastRender(){return U},get lastRenderType(){return H},templateInit:Date.now(),get lifetime(){return Date.now()-v.templateInit},renderOptions:{},lastRenderStartTime:0,lastRenderStopTime:0,renderTimes:[],get rendertimes(){var e=[];for(var t in this.renderTimes){e.push(this.renderTimes[t][0])}return e},get lastRenderTime(){return v.lastRenderStopTime-v.lastRenderStartTime},get renderCount(){return{full:A,partial:F,"static":G}}};for(var S in g)v.renderOptions[S]=g[S];var b=function(e,r){var n;var i="";switch(e){case"notice":if(g.reporting<3)return;n=122;i="[Notice] ";break;case"notice 2":if(g.reporting<3)return;n=33;i="[Notice] ";break;case"notice 3":if(g.reporting<3)return;n=92;i="[Notice] ";break;case"notice 4":if(g.reporting<3)return;n=22;i="[Notice] ";break;case"warn":case"warning":if(g.reporting<2)return;n=220;i="[Warning] ";break;case"error":case"failure":if(g.reporting<1)return;n=160;i="[Error] ";break;default:if(g.reporting<3)return;n=122;i="[Notice] "}if(e=="error"&&g.haltOnError){if(t){throw new Error(a.xterm(n)(i+s()+r))}else{throw new Error(i+s()+r)}}else{t?console.log(a.xterm(n)(i+s()+r)):console.log(i+s()+r)}};m(i);var w=g.code?g.name?g.name:"native code":e;e=!g.code?n.readFileSync(e).toString():e;I=new d(e);var T=l(e);var E=[];var R=[];var O=[];var j=0;var _=0;var y="";var k="";var M=[];p.cache[T]={get tid(){return T},get path(){return w},get tpl(){return f},get children(){return M},get output(){return W()},get lastFullRender(){return P},get lastRender(){return U},get lastRenderType(){return H}};var I;var D=false;var L=false;var x=false;var C=h.messages;var N;var A=0;var F=0;var G=0;var P="Never";var U="Never";var H=null;f.stats=f.getStats=function(){return v};f.toString=function(e){if(e){return T.slice(-5)}else{var r="Template [";if(g.code==false){if(g.useAbsolutePaths!=false&&t){r+=o.resolve(w)}else{r+=w}}else{r+="native code"}r+="]"}return r};f.update=function(){return q()};f.output=function(){return W()};f.render=function(e){if(!e)e={};if(e.delimiterStart&&e.delimiterStart!=g.delimiterStart||e.delimiterStop&&e.delimiterStop!=g.delimiterStop){g.forceFullRender=true}m(e);var t="";if(!g.rRender)C.RENDER_BEGIN;if(g.recursiveReference==true||!g.forceFullRender&&p.cache[T]&&v.renderCount.full>0&&Date.now()-P<g.fullCacheLifetime){t=X()}else if(!g.forceFullRender&&p.cache[T]&&(v.renderCount.full>0&&Date.now()-P<g.partialCacheLifetime)){t=q()}else{t=$()}U=Date.now();if(g.output&&g.outputFormat){var r=g.outputFormat.join("-");r=r.replace(/^tid/,T).replace(/^atid/,T.slice(-7)).replace(/filename/,o.basename(w).replace(o.extname(w),"")).replace(/time/,U).replace(/type/,H).replace(/-ext/,"."+g.outputExt);n.writeFileSync(r,clean)}if(!g.rRender)C.RENDER_END;return t};var $=function(){v.lastRenderStartTime=Date.now();Y();while(!I.eof()){B();if(I.eof())break;B(true);if(I.eof())break;D?k+=I.peek():y+=I.peek();I.next()}if(D&&I.eof())C.MSG_DELIMITER_MISMATCH_NO_STOP_DELIMITER;if(y!=""){R.push(y);K(et())}if(k)K(k+"\n",true);z();P=Date.now();A++;H="f";v.lastRenderStopTime=Date.now();v.renderTimes.push([v.lastRenderTime,"f"]);C.MSG_RENDER_SUCCESS;return W()};var q=function(){v.lastRenderStartTime=Date.now();z();F++;H="p";v.lastRenderStopTime=Date.now();v.renderTimes.push([v.lastRenderTime,"p"]);C.MSG_PARTIAL_SUCCESS;return W()};var X=function(){v.lastRenderStartTime=Date.now();G++;H="s";v.lastRenderStopTime=Date.now();v.renderTimes.push([v.lastRenderTime,"s"]);C.MSG_STATIC_SUCCESS;return W()};var B=function(e){if(!D){if(I.lookahead(g.delimiterStop.length-1)==g.delimiterStop&&!(I.lookbehind(1)=="\\"&&r.indexOf(I.peek())>-1))C.MSG_DELIMITER_MISMATCH_STOP_WITHOUT_START;var n=I.lookahead(g.delimiterStart.length-1)==g.delimiterStart;var i=!t&&I.lookahead(u(g.delimiterStart,true).length-1)==u(g.delimiterStart,true);if(n||i){D=true;if(y){R.push(y);K(et())}I.next(n?g.delimiterStart.length:u(g.delimiterStart,true).length)}}else{if(I.lookahead(g.delimiterStart.length-1)==g.delimiterStart&&!(I.lookbehind(1)=="\\"&&r.indexOf(I.peek())>-1)&&!(x||L))C.MSG_DELIMITER_MISMATCH_START_WITHOUT_STOP;if(!e){if(!x&&!L&&I.lookbehind(1)!="\\"&&I.peek()=="'"){x=true}else if(x&&!L&&I.lookbehind(1)!="\\"&&I.peek()=="'"){x=false}if(!L&&!x&&I.lookbehind(1)!="\\"&&I.peek()=='"'){L=true}else if(L&&!x&&I.lookbehind(1)!="\\"&&I.peek()=='"'){L=false}}var n=I.lookahead(g.delimiterStop.length-1)==g.delimiterStop;var i=!t&&I.lookahead(u(g.delimiterStop,true).length-1)==u(g.delimiterStop,true);if((n||i)&&!(L||x)){D=false;if(k)K(k+"\n",true);I.next(n?g.delimiterStop.length:u(g.delimiterStop,true).length)}}return D};var K=function(e,t){O.push(e);if(t)k="";j++};var W=function(){var e=E.join("");switch(g.style){case"compressed":e=e.replace(/(<.+?>)(.*?)(<.+?>)/g,function(e,t,r,n){return t+(r?t.match(/script|style/g)?r:r:"")+n}).replace(/>\s+</g,"><").replace(/\s\s+/g," ").replace(/(\")(\s+)?(.*?)(\s+)?(\")/g,"$1$3$1").replace(/[\n\t\r]/g,"").replace(/<\!--.*?-->/gm,"");case"compact":break}return e};var V=function(){var e=O.join("").replace(/(\/\/(.*?)\n)|(\/\*(.*?)\*\/)/g,"").replace(/else(\s)?if(\s+)?\((.*?)\)(\s+)?:/g,"} else if($3) {").replace(/(if|for|while)(\s+)?\((.*?)\)(\s+)?:/g,"$1($3) {").replace(/else(?!(\s+)?if)(:)?/,"} else {").replace(/end(\s)?(if|for|while)(\s+)?(;)?/g,"}").replace(/(\s+)?;(\s+)?/g,";").replace(/(\s+)?print(\s+)?\('(\s+)'\)(\s+)?;(\s+)?/g,"").replace(/(\{|\});/g,"$1").replace(/;+/g,";").replace(/(\s+)?(\{|\})(\s+)?/g,"$2");return e};var Y=function(){x=L=false;I.reset();E=[];O=[];R=[];k=y="";for(var e in g)v.renderOptions[e]=g[e]};var z=function(){E=[];var e=V();if(!t)var r=undefined;try{var n=new Function("print, scope, render, require, echo",'"use strict"\nvar global = undefined;'+e).bind(c||{});n(J,c,Z,r,Q)}catch(i){e=e.replace(/((else if|if|for|while)(\s+)?\((.*?)\))(?!((.*?)(;(?!((\s+)?print)))|(\s+)?\{))/g,function(e,t,r,n){C.MSG_FUNCTION_SYNTAX_ERROR_DETECTED_FIXED("Missing colon/open-curly-bracket after '"+e.trim()+"'");return arguments[2]=="else if"?"} "+e+" {":e+" {"});try{var n=new Function("print, scope, render, require, echo",(g.strict?"use strict\n":"")+"var global = undefined;"+e).bind(c||{});n(J,c,Z,r,Q)}catch(o){if(!g.haltOnError){C.MSG_FUNCTION_ERROR_CAUGHT(o)}else{o.message=t?a.xterm(160)(i.message):i.message;throw o}}}};var J=function(){for(var e in arguments)E.push(arguments[e].toString())};var Q=J;var Z=function(e,r,i){if(!r||r&&Object.keys(r).length==0)r=g;if(!t){r.delimiterStart=u(r.delimiterStart,true);r.delimiterStop=u(r.delimiterStop,true);r.reporting=2;r.code=false}var o=!r.code?l(n.readFileSync(e).toString()):l(e);if(p.cache[o]){if(M.indexOf(o)<0)M.push(o);if(p.cache[o].children.indexOf(T)>-1&&p.cache[T].children.indexOf(o)>-1){if(!p.cache[o].warned){C.MSG_RENDER_RECURSIVE_LOOP(p.cache[o].tpl);p.cache[o].warned=true;p.cache[T].warned=true}E.push(p.cache[o].tpl.render({rRender:true,recursiveReference:true}))}else if(p.cache[o]){E.push(p.cache[o].tpl.render({rRender:true}))}}else{E.push(p.new(e,r,i).render({rRender:true}))}};var et=function(){var e="; print('"+y.replace(/([\'\"\n\r\t])/g,"\\$1")+"');";y="";_++;return e};return this};var p={cache:{},get stats(){var e={};for(var t in this.cache)e[t]=this.cache[t].tpl.stats();return e},get:function(e,t){var r=!t?n.readFileSync(e).toString():e;return this.cache[l(r)]?this.cache[l(r)].tpl:null},"new":function(e,t,r){var i=t&&!t.code?n.readFileSync(e).toString():e;return this.cache[l(i)]?this.cache[l(i)].tpl:new h(e,t,r)},kill:function(e){for(var t in this.cache){if(this.cache[t]==e){delete this.cache[t]}}}};if(t){module.exports=p}else if(window){(function(e,t){e=e||"docReady";t=t||window;var r=[];var n=false;var i=false;function o(){if(!n){n=true;for(var e=0;e<r.length;e++){r[e].fn.call(window,r[e].ctx)}r=[]}}function a(){if(document.readyState==="complete")o()}t[e]=function(e,t){if(n){setTimeout(function(){e(t)},1);return}else{r.push({fn:e,ctx:t})}if(document.readyState==="complete"){setTimeout(o,1)}else if(!i){if(document.addEventListener){document.addEventListener("DOMContentLoaded",o,false);window.addEventListener("load",o,false)}else{document.attachEvent("onreadystatechange",a);window.attachEvent("onload",o)}i=true}}})("docReady",window);var g="<strong>Template Error:</strong><br /><em>Oops! Something went wrong...<br/>If you are the page administrator, check the console for technical information.<em>";var m={code:true,delimiterStart:"<$",delimiterStop:"$>",reporting:2,name:location.href.substring(location.href.lastIndexOf("/")+1,location.href.length)};var v=true;var S=null;var b=false;var w="";window.notpl=function(e,t,r,n){for(var i in e)m[i]=e[i];switch(typeof n){case"object":g=p.new(n.file,{reporting:1},t).render();break;case"string":case"function":g=n;break;default:console.log("[Warning]","Error message must be a string value, parameter 'msg' ignored.")}if(v){docReady(function(){var e=document.documentElement.innerHTML;document.documentElement.innerHTML="";S=new h(e,m,t);try{w=S.render()}catch(n){w=undefined;b=true}document.documentElement.innerHTML=w||(typeof g=="function"?g():g);if(r&&r instanceof Function)r(b,S);v=false})}else{return S.render()}};window.notplStats=function(){return p.stats}}})(this);