!function(a){"use strict";function i(a,c,d){if(!b){if(!a||""==a)return void 0;var f=a.split(""),g=0;for(var h in f)f.hasOwnProperty(h)&&(g+=f[h].charCodeAt(0));return g.toString(16)}return e.createHash(c||"md5").update(a,"utf8").digest(d||"hex")}function j(a,b){var c=a.split(""),d={'"':"&quot;","&":"&amp;","<":"&lt;",">":"&gt;"};if(b){for(var e in d)var a=a.replace(RegExp(d[e],"g"),e);return a}for(var e=0;e<c.length;e++)d[c[e]]&&(c[e]=d[c[e]]);return c.join("")}function k(){var a=new Date;return l(a.getHours(),2)+":"+l(a.getMinutes(),2)+":"+l(a.getSeconds(),2)+":"+l(a.getMilliseconds(),2)+" > "}function l(a,b){var c="000000000000000000000000000000000000000000000000"+a;return c.substr(c.length-b)}var b="undefined"!=typeof module&&a.module!==module,c=[".","^","\\","?","{","}","[","]","*","!","|","+","/"];if(b)var d=require("fs"),e=require("crypto"),f=require("path"),g=require("cli-color");else if(window)var h={},d={readFileSync:function(a){if(!h[a]){var b=window.XMLHttpRequest?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP");b.open("GET",a,!1),b.send(),h[a]=b.responseText}return h[a]},writeFileSync:function(a,b){console.log(b)}};var m=function(a){var b=this,c=Array(),d=0,e=Array();return b.init=b.value=function(a){a||(a="");for(var f,d=/\n/g;f=d.exec(a);)e.push(f.index);return c=a.toString().split(""),c.push("EOF"),b.reset(),b},b.last=function(){return b.tokens[c.length-2]},b.length=function(){return c.length-1},b.pos=b.position=function(){return d},b.peek=function(){return"EOF"===c[d]?c[d-1]:c[d]},b.goto=function(a){return d=a>=c.length?c.length-1:a,b},b.line=function(){for(var a=0;e[a]<d;)a++;a--;var b=d-(e[a]||0)+(0>a?1:0);return[a+2,b]},b.source=b.toString=function(){var a=c.slice(0);return a.pop(),a.join("")},b.reset=function(){return d=0,this},b.rest=function(){return c.slice(d,c.length-1).join("")},b.range=function(a,b){return c.slice(a,b).join("")},b.end=b.eof=function(){return"EOF"==c[d]?!0:!1},b.next=function(a){if(void 0!=a){if(0>a)throw new Error("Parameter 'value' must be greater than or equal to 0.");if("number"!=typeof a)throw new Error("Parameter 'value' must be an integer value.");d+a>c.length-1&&(a=c.length-d-1),b.goto(d+=a)}else b.goto(++d);return b},b.previous=function(a){if(void 0!=a){if(0>a)throw new Error("Parameter 'value' must be greater than or equal to 0.");if("number"!=typeof a)throw new Error("Parameter 'value' must be an integer value.");0>d-a&&(a=0),b.goto(d-=a)}else b.goto(--d);return b},b.lookahead=function(a){return a>c.length-2&&(a=c.length-2),d<c.length-2?c.slice(d,d+a+1).join(""):c.slice(d,c.length-1).join("")},b.lookbehind=function(a){return 0>a&&(a=0),d<c.length-2?c.slice(d-a,d).join(""):c.slice(a,d).join("")},void 0!==a?b.init(a):null,this},o=function(a,e,h){var l=this,n={APPNAME:"NoTpl",VERSION:"0.1.2",messages:{get RENDER_BEGIN(){t("notice 3","---------> Render of "+l.toString()+" started.")},get RENDER_END(){t("notice 3","---------> Render of "+l.toString()+" completed ("+r.lastRenderTime+" ms).\n")},get MSG_RENDER_SUCCESS(){t("notice",l.toString()+" has been fully rendered ("+r.lastRenderTime+" ms).")},get MSG_PARTIAL_SUCCESS(){t("notice",l.toString()+" has been partially rendered ("+r.lastRenderTime+" ms).")},get MSG_STATIC_SUCCESS(){t("notice",l.toString()+" has been returned statically ("+r.lastRenderTime+" ms).")},get MSG_DELIMITER_TOO_SHORT(){t("warn","Using a single character as a delimiter is not recommended! Please use 2 or more characters.\n*** This can potentially break your code! ***")},get MSG_DELIMITER_MISMATCH_NO_STOP_DELIMITER(){t("error","Expecting '"+(b?o.delimiterStop:j(o.delimiterStop,!0))+"'. Reached the end of file without matching closing tag.")},get MSG_DELIMITER_MISMATCH_STOP_WITHOUT_START(){t("error","Unexpected '"+(b?o.delimiterStop:j(o.delimiterStop,!0))+"'. Found closing tag, without matching opening tag.")},get MSG_DELIMITER_MISMATCH_START_WITHOUT_STOP(){t("error","Unexpected '"+(b?o.delimiterStart:j(o.delimiterStart,!0))+"'. Found opening tag, without matching closing tag.")},MSG_DELIMITER_POTENTIAL_BREAK:function(a){t("warn","Using '"+a+"' as a delimiter is not recommended.\n*** This can potentially break your code! ***")},MSG_FUNCTION_SYNTAX_ERROR_DETECTED_FIXED:function(a){t("warning","Syntax Error detected and repaired in "+l.toString()+".\n"+a+".\n")},MSG_FUNCTION_ERROR_CAUGHT:function(a){t("error",a.name+" in "+l.toString()+". Rendering skipped, with message:\n'"+a.message+"'.")},MSG_RENDER_RECURSIVE_LOOP:function(a){t("warning",l.toString()+" and "+a.toString()+" circularly reference each other. Infinite loop detected.")}}},o={delimiterStart:"<$",delimiterStop:"$>",useAbsolutePaths:!1,code:!1,reporting:2,style:"compressed",haltOnError:!0,partialCacheLifetime:3e4,fullCacheLifetime:0,output:!1,outputFormat:["atid","type","filename","ext"],outputExt:"html",strict:!0,name:void 0},q=function(a){for(var c in a){switch("string"==typeof a[c]&&(a[c]=a[c].trim()),c){case"reporting":"number"!=typeof a[c]&&(t("warn","Option 'reporting' should be an integer, not '"+a[c].toString()+"'. This option has been ignored."),a[c]=o[c]);break;case"style":"string"!=typeof a[c]&&(t("warn","Option 'style' should be a string, not '"+a[c].toString()+"'. This option has been ignored."),a[c]=o[c]);break;case"partialCacheLifetime":case"fullCacheLifetime":"number"!=typeof a[c]&&(t("warn","Option '"+c+"' should be an integer, not '"+a[c].toString()+"'. This option has been ignored."),a[c]=o[c]);break;case"outputFormat":a[c]instanceof Array||(t("warn","Option '"+c+"' should be an array, not '"+a[c].toString()+"'. This option has been ignored."),a[c]=o[c])}switch(c){case"fullCacheLifetime":a[c]<o.fullCacheLifetime&&(t("warn","The full cache liftime must be >= "+o.fullCacheLifetime+"ms. This option has been ignored."),a[c]=o[c]),a[c]>6e5&&t("notice 2","The full cache liftime is > 600000 (10 Minutes). Output will appear *static* for this duration.");break;case"delimiterStart":case"delimiterStop":var d=["break","case","class","catch","const","continue","debugger","default","delete","do","else","export","extends","finally","for","function","if","import","in","instanceof","let","new","return","super","switch","this","throw","try","typeof","var","void","while","with","yield"];a[c].length<2&&I.MSG_DELIMITER_TOO_SHORT,a[c].match(/(\{{2,})|(\}{2,})|(\({2,})|(\){2,})|(;{2,})|(={2,})|(\+{2,})|(-{2,})/)&&I.MSG_DELIMITER_POTENTIAL_BREAK(a[c]),a[c].match(/<=|=>|\+=|-=|\\=|\*=|%=|""|''/)&&I.MSG_DELIMITER_POTENTIAL_BREAK(a[c]),d.indexOf(a[c])>-1&&I.MSG_DELIMITER_POTENTIAL_BREAK(a[c]),b||(a[c]=j(a[c]))}o[c]=a[c]}},r={get path(){return u},get lastFullRender(){return N},get lastRender(){return O},get lastRenderType(){return P},templateInit:Date.now(),get lifetime(){return Date.now()-r.templateInit},renderOptions:{},lastRenderStartTime:0,lastRenderStopTime:0,renderTimes:[],get rendertimes(){var a=[];for(var b in this.renderTimes)a.push(this.renderTimes[b][0]);return a},get lastRenderTime(){return r.lastRenderStopTime-r.lastRenderStartTime},get renderCount(){return{full:K,partial:L,"static":M}}};for(var s in o)r.renderOptions[s]=o[s];var t=function(a,c){var d,e="";switch(a){case"notice":if(o.reporting<3)return;d=122,e="[Notice] ";break;case"notice 2":if(o.reporting<3)return;d=33,e="[Notice] ";break;case"notice 3":if(o.reporting<3)return;d=92,e="[Notice] ";break;case"notice 4":if(o.reporting<3)return;d=22,e="[Notice] ";break;case"warn":case"warning":if(o.reporting<2)return;d=220,e="[Warning] ";break;case"error":case"failure":if(o.reporting<1)return;d=160,e="[Error] ";break;default:if(o.reporting<3)return;d=122,e="[Notice] "}if("error"==a&&o.haltOnError)throw b?new Error(g.xterm(d)(e+k()+c)):new Error(e+k()+c);b?console.log(g.xterm(d)(e+k()+c)):console.log(e+k()+c)};q(e);var u=o.code?o.name?o.name:"native code":a;a=o.code?a:d.readFileSync(a).toString(),E=new m(a);var v=i(a),w=[],x=[],y=[],z=0,A=0,B="",C="",D=[];p.cache[v]={get tid(){return v},get path(){return u},get tpl(){return l},get children(){return D},get output(){return V()},get lastFullRender(){return N},get lastRender(){return O},get lastRenderType(){return P}};var E,F=!1,G=!1,H=!1,I=n.messages,K=0,L=0,M=0,N="Never",O="Never",P=null;l.stats=l.getStats=function(){return r},l.toString=function(a){if(a)return v.slice(-5);var c="Template [";return c+=0==o.code?0!=o.useAbsolutePaths&&b?f.resolve(u):u:"native code",c+="]"},l.update=function(){return R()},l.output=function(){return V()},l.render=function(a){q(a);var b="";if(a||(a={}),a.rRender||I.RENDER_BEGIN,b=1==a.recursiveReference||!a.forceFullRender&&p.cache[v]&&r.renderCount.full>0&&Date.now()-N<o.fullCacheLifetime?S():!a.forceFullRender&&p.cache[v]&&r.renderCount.full>0&&Date.now()-N<o.partialCacheLifetime?R():Q(),O=Date.now(),o.output&&o.outputFormat){var c=o.outputFormat.join("-");c=c.replace(/^tid/,v).replace(/^atid/,v.slice(-7)).replace(/filename/,f.basename(u).replace(f.extname(u),"")).replace(/time/,O).replace(/type/,P).replace(/-ext/,"."+o.outputExt),d.writeFileSync(c,clean)}return a.rRender||I.RENDER_END,b};var Q=function(){for(r.lastRenderStartTime=Date.now(),X();!E.eof()&&(T(),!E.eof())&&(T(),!E.eof());)F?C+=E.peek():B+=E.peek(),E.next();return F&&E.eof()&&I.MSG_DELIMITER_MISMATCH_NO_STOP_DELIMITER,""!=B&&(x.push(B),U(ab())),C&&U(C+"\n",!0),Y(),N=Date.now(),K++,P="f",r.lastRenderStopTime=Date.now(),r.renderTimes.push([r.lastRenderTime,"f"]),I.MSG_RENDER_SUCCESS,V()},R=function(){return r.lastRenderStartTime=Date.now(),Y(),L++,P="p",r.lastRenderStopTime=Date.now(),r.renderTimes.push([r.lastRenderTime,"p"]),I.MSG_PARTIAL_SUCCESS,V()},S=function(){return r.lastRenderStartTime=Date.now(),M++,P="s",r.lastRenderStopTime=Date.now(),r.renderTimes.push([r.lastRenderTime,"s"]),I.MSG_STATIC_SUCCESS,V()},T=function(){if(F){E.lookahead(o.delimiterStart.length-1)!=o.delimiterStart||"\\"==E.lookbehind(1)&&c.indexOf(E.peek())>-1||I.MSG_DELIMITER_MISMATCH_START_WITHOUT_STOP,G||"'"!=E.peek()||(H=!H),H||'"'!=E.peek()||(G=!G);var a=E.lookahead(o.delimiterStop.length-1)==o.delimiterStop,d=!b&&E.lookahead(j(o.delimiterStop,!0).length-1)==j(o.delimiterStop,!0);!a&&!d||G||H||(F=!1,C&&U(C+"\n",!0),E.next(a?o.delimiterStop.length:j(o.delimiterStop,!0).length))}else{E.lookahead(o.delimiterStop.length-1)!=o.delimiterStop||"\\"==E.lookbehind(1)&&c.indexOf(E.peek())>-1||I.MSG_DELIMITER_MISMATCH_STOP_WITHOUT_START;var a=E.lookahead(o.delimiterStart.length-1)==o.delimiterStart,d=!b&&E.lookahead(j(o.delimiterStart,!0).length-1)==j(o.delimiterStart,!0);(a||d)&&(F=!0,B&&(x.push(B),U(ab())),E.next(a?o.delimiterStart.length:j(o.delimiterStart,!0).length))}return F},U=function(a,b){y.push(a),b&&(C=""),z++},V=function(){var a=w.join("");switch(o.style){case"compressed":a=a.replace(/(<.+?>)(.*?)(<.+?>)/g,function(a,b,c,d){return b+(c?b.match(/script|style/g)?c:c:"")+d}).replace(/>\s+</g,"><").replace(/\s\s+/g," ").replace(/(\")(\s+)?(.*?)(\s+)?(\")/g,"$1$3$1").replace(/[\n\t\r]/g,"").replace(/<\!--.*?-->/gm,"");case"compact":}return a},W=function(){var a=y.join("").replace(/(\/\/(.*?)\n)|(\/\*(.*?)\*\/)/g,"").replace(/else(\s)?if(\s+)?\((.*?)\)(\s+)?:/g,"} else if($3) {").replace(/(if|for|while)(\s+)?\((.*?)\)(\s+)?:/g,"$1($3) {").replace(/else(?!(\s+)?if)(:)?/,"} else {").replace(/end(\s)?(if|for|while)(\s+)?(;)?/g,"}").replace(/(\s+)?;(\s+)?/g,";").replace(/(\s+)?print(\s+)?\('(\s+)'\)(\s+)?;(\s+)?/g,"").replace(/(\{|\});/g,"$1").replace(/;+/g,";").replace(/(\s+)?(\{|\})(\s+)?/g,"$2");return a},X=function(){H=G=!1,E.reset(),w=[],y=[],x=[],C=B="";for(var a in e)o[a]=e[a];for(var a in o)r.renderOptions[a]=o[a]},Y=function(){w=[];var a=W();if(!b)var c=void 0;try{var d=new Function("print, scope, render, require, echo",'"use strict"\nvar global = undefined;'+a).bind(h||{});d(Z,h,_,c,$)}catch(e){a=a.replace(/((else if|if|for|while)(\s+)?\((.*?)\))(?!((.*?)(;(?!((\s+)?print)))|(\s+)?\{))/g,function(a){return I.MSG_FUNCTION_SYNTAX_ERROR_DETECTED_FIXED("Missing colon/open-curly-bracket after '"+a.trim()+"'"),"else if"==arguments[2]?"} "+a+" {":a+" {"});try{var d=new Function("print, scope, render, require, echo",(o.strict?"use strict\n":"")+"var global = undefined;"+a).bind(h||{});d(Z,h,_,c,$)}catch(f){if(o.haltOnError)throw f.message=b?g.xterm(160)(e.message):e.message,f;I.MSG_FUNCTION_ERROR_CAUGHT(f)}}},Z=function(){for(var a in arguments)w.push(arguments[a].toString())},$=Z,_=function(a,c,e){(!c||c&&0==Object.keys(c).length)&&(c=o),b||(c.delimiterStart=j(c.delimiterStart,!0),c.delimiterStop=j(c.delimiterStop,!0),c.reporting=2,c.code=!1);var f=c.code?i(a):i(d.readFileSync(a).toString());p.cache[f]?(D.indexOf(f)<0&&D.push(f),p.cache[f].children.indexOf(v)>-1&&p.cache[v].children.indexOf(f)>-1?(p.cache[f].warned||(I.MSG_RENDER_RECURSIVE_LOOP(p.cache[f].tpl),p.cache[f].warned=!0,p.cache[v].warned=!0),w.push(p.cache[f].tpl.render({rRender:!0,recursiveReference:!0}))):p.cache[f]&&w.push(p.cache[f].tpl.render({rRender:!0}))):w.push(p.new(a,c,e).render({rRender:!0}))},ab=function(){var a="; print('"+B.replace(/([\'\"\n\r\t])/g,"\\$1")+"');";return B="",A++,a};return this},p={cache:{},get stats(){var a={};for(var b in this.cache)a[b]=this.cache[b].tpl.stats();return a},get:function(a,b){var c=b?a:d.readFileSync(a).toString();return this.cache[i(c)]?this.cache[i(c)].tpl:null},"new":function(a,b,c){var e=b&&!b.code?d.readFileSync(a).toString():a;return this.cache[i(e)]?this.cache[i(e)].tpl:new o(a,b,c)},kill:function(a){for(var b in this.cache)this.cache[b]==a&&delete this.cache[b]}};if(b)module.exports=p;else if(window){!function(a,b){function f(){if(!d){d=!0;for(var a=0;a<c.length;a++)c[a].fn.call(window,c[a].ctx);c=[]}}function g(){"complete"===document.readyState&&f()}a=a||"docReady",b=b||window;var c=[],d=!1,e=!1;b[a]=function(a,b){return d?(setTimeout(function(){a(b)},1),void 0):(c.push({fn:a,ctx:b}),"complete"===document.readyState?setTimeout(f,1):e||(document.addEventListener?(document.addEventListener("DOMContentLoaded",f,!1),window.addEventListener("load",f,!1)):(document.attachEvent("onreadystatechange",g),window.attachEvent("onload",f)),e=!0),void 0)}}("docReady",window);var q="<strong>Template Error:</strong><br /><em>Oops! Something went wrong...<br/>If you are the page administrator, check the console for technical information.<em>",r={code:!0,delimiterStart:"<$",delimiterStop:"$>",reporting:2,name:location.href.substring(location.href.lastIndexOf("/")+1,location.href.length)},s=!0,t=null,u=!1,v="";window.notpl=function(a,b,c,d){for(var e in a)r[e]=a[e];switch(typeof d){case"object":q=p.new(d.file,{reporting:1},b).render();break;case"string":case"function":q=d;break;default:console.log("[Warning]","Error message must be a string value, parameter 'msg' ignored.")}return s?(docReady(function(){var a=document.documentElement.innerHTML;document.documentElement.innerHTML="",t=new o(a,r,b);try{v=t.render()}catch(d){v=void 0,u=!0}document.documentElement.innerHTML=v||("function"==typeof q?q():q),c&&c instanceof Function&&c(u,t),s=!1}),void 0):t.render()},window.notplStats=function(){return p.stats}}}(this);